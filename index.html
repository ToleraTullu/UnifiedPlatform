<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Management Platform - Login | Efficiency in Every Sector</title>
    <meta name="description"
        content="Access the Unified Management Platform for seamless control over currency exchange, pharmacy inventory, and construction projects. Manage your business efficiently with our all-in-one solution.">
    <meta name="keywords"
        content="Unified Management Platform, Currency Exchange Software, Pharmacy Inventory Management, Construction Project Tracking, Business Efficiency, UniManage">
    <link rel="canonical" href="http://unifiedportal.org.et/index.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://unifiedportal.org.et/">
    <meta property="og:title" content="Unified Management Platform - All-in-One Business Solution">
    <meta property="og:description"
        content="Streamline your business operations across exchange, pharmacy, and construction sectors with the Unified Management Platform.">
    <meta property="og:image" content="http://unifiedportal.org.et/assets/img/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="http://unifiedportal.org.et/">
    <meta property="twitter:title" content="Unified Management Platform">
    <meta property="twitter:description"
        content="Streamline your business operations across exchange, pharmacy, and construction sectors with the Unified Management Platform.">
    <meta property="twitter:image" content="http://unifiedportal.org.et/assets/img/og-image.jpg">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Unified Management Platform",
      "alternateName": "UniManage",
      "description": "An integrated management system for currency exchange, pharmacy stock control, and construction projects.",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web-based",
      "url": "http://unifiedportal.org.et",
      "author": {
        "@type": "Organization",
        "name": "UniManage Inc."
      }
    }
    </script>

    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .login-card {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
        }

        h1 {
            text-align: center;
            color: #1e3c72;
            margin-bottom: 2rem;
        }
    </style>
</head>

<body>
    <main class="login-card">
        <h1>Welcome Back</h1>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Enter username" required aria-label="Username">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter password" required aria-label="Password">
            </div>
            <button type="submit" class="btn-primary full-width">Login</button>
            <div id="errorMsg" style="color:red; text-align:center; margin-top:10px; display:none" aria-live="polite">
                Invalid credentials
            </div>
        </form>

        <div style="margin-top:20px; font-size:0.8rem; background:#f8f9fa; padding:10px; border-radius:4px;">
            <strong>Demo Credentials:</strong><br>
            admin / 123<br>
            exchange / 123<br>
            pharmacy / 123<br>
            construction / 123
        </div>
    </main>

    <!-- Assets now in assets/js -->
    <script src="assets/js/store.js"></script>
    <script src="assets/js/auth.js"></script>
    <script>
        const loginForm = document.getElementById('loginForm');
        const errorMsg = document.getElementById('errorMsg');

        function redirectUser(user) {
            window.location.href = 'dashboard.html';
        }

        // Check active session
        const active = JSON.parse(sessionStorage.getItem('active_user'));
        if (active) redirectUser(active);

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const u = document.getElementById('username').value.trim();
            const p = document.getElementById('password').value.trim();
            const res = window.Auth.login(u, p);

            if (res.success) redirectUser(res.user);
            else {
                errorMsg.style.display = 'block';
                errorMsg.textContent = res.message;
            }
        });
    </script>
</body>

</html>