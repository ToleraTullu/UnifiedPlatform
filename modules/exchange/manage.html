<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UniManage - Manage Exchange Rates</title>
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-sm mt-4">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h4 class="card-title mb-0 text-primary">Manage Currencies & Rates</h4>
                    <span class="badge bg-warning text-dark">Admin Only</span>
                </div>
                <div class="card-body">
                    <div id="no-access" class="alert alert-danger" style="display:none;">
                        Access denied. Only administrators can manage rates.
                    </div>

                    <!-- Rates Editor injects here -->
                    <div id="exchange-rates-form">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/store.js"></script>
    <script src="../../assets/js/auth.js"></script>
    <script src="../../assets/js/layout.js"></script>
    <script src="../../js/exchange.js"></script>
    <script>
        const layout = new Layout();
        layout.ensureLayoutContainers();
        layout.checkAuth();
        layout.renderSidebar();
        layout.renderTopbar();

        document.addEventListener('DOMContentLoaded', () => {
             const user = JSON.parse(sessionStorage.getItem('active_user') || '{}');
             if (!user || user.role !== 'admin') {
                 document.getElementById('no-access').style.display = 'block';
                 document.getElementById('exchange-rates-form').style.display = 'none';
                 return;
             }
             
             if (window.ExchangeModule) {
                 const ex = new ExchangeModule();
                 ex.onViewLoad('rates'); 
             }
        });
    </script>
</body>
</html>